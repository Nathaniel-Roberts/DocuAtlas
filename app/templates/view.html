<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Base</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <!-- Left Sidebar: File Explorer -->
        <div class="sidebar">
            <h2>File Explorer</h2>
            <ul>
                {% for file in files_and_folders %}
                    <li>
                        <a href="#" class="file-link" data-file="{{ file }}">{{ file }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
        
        <!-- Right Content Section -->
        <div class="content">
            <div id="file-content">
                <h2>File Content</h2>
                <div id="file-text">
                    <p>Select a file to view its contents.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // When a file is clicked, load its content
        const fileLinks = document.querySelectorAll('.file-link');
        fileLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();

                // Fetch the file content
                const fileName = this.getAttribute('data-file');

                fetch(`/file-content/${fileName}`)
                    .then(response => response.json())
                    .then(data => {
                        // Update the content area
                        document.getElementById('file-text').innerText = data.content;
                    })
                    .catch(error => console.error('Error fetching file content:', error));
            });
        });
    </script>
</body>
</html>
